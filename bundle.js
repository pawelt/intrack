(()=>{var o=(e,t,...r)=>{if(typeof e=="function")return e(t||{},...r);let n=document.createElement(e);return Object.entries(t||{}).forEach(([s,a])=>{s.startsWith("on")&&typeof a=="function"?n.addEventListener(s.substring(2).toLowerCase(),a):s.startsWith("data-")?n.dataset[s.substring(5)]=""+a:s==="xname"||s==="xid"?n.dataset[s]=""+a:n.setAttribute(s,""+a)}),r.flat().forEach(s=>{n.appendChild(typeof s=="object"?s:document.createTextNode(s))}),n};var ye={},w=(e,t)=>{let{type:r}=e({});for(let n of ye[r]||[])n(t);return!0},h=(e,t)=>{let{type:r}=e({});return ye[r]=ye[r]||[],ye[r].push(t),!0};var et=({url:e=window.location.href,pathname:t,searchAdd:r,searchSet:n})=>{let s=new URL(""+e);s.pathname=t??s.pathname;let a=r??n;if(!a)return s;let i=new URLSearchParams(r?s.search:"");for(let c in a){let l=a[c];Array.isArray(l)?(i.delete(c),l.forEach(d=>i.append(c,d))):l!==void 0?i.set(c,l):i.delete(c)}return s.search=""+i,s},ve=e=>({type:"router:navigate",payload:e}),tt=e=>{let t=""+e;window.history.pushState(null,"",t),w(ve,{newUrl:new URL(t)})};window.addEventListener("popstate",()=>{w(ve,{newUrl:new URL(window.location.href)})});var be=()=>new URLSearchParams(window.location.search).get("view")||"home";var rt="todos",B=[],De=e=>({type:"store:item-created",payload:e}),Tr=e=>({type:"store:item-updated",payload:e}),We=e=>({type:"store:item-deleted",payload:e}),nt=()=>B,ot=async e=>{let t={text:e,done:!1,id:new Date().toISOString()};return B.push(t),_e().then(()=>w(De,{todo:t}))},at=async e=>{let t=B.find(r=>r.id===e.id);return t?(Object.assign(t,e),_e().then(()=>w(Tr,{todo:t}))):!1},st=async e=>{let t=B.findIndex(r=>r.id===e);return t<0?!1:(B.splice(t,1),_e().then(()=>w(We,{todoId:e})))},it=async()=>{B=JSON.parse(localStorage.getItem(rt)||"[]"),console.log({todos:B})},_e=async()=>{localStorage.setItem(rt,JSON.stringify(B))};var ct=e=>fetch(`http://it.nottycanvas.com?target=${e}`),Se=[{name:"ose-funds",description:"Oslo B\xF8rs - Funds",matchSource:e=>e.includes("markedsaktivitet/#/details/")&&e.includes("oslobors.no/"),fetchInitialData:async e=>{try{if(!e.sourceUrl){alert("Error: empty source URL");return}let t=(e.sourceUrl.match(/details\/([^/]+)\/overview/)||[])[1],r=`https://www.oslobors.no/ob/servlets/components?type=header&source=feed.omff.FUNDS&view=REALTIME&columns=ITEM%2C+ISIN%2C+SECURITYNAME+as+LONG_NAME%2C&filter=ITEM_SECTOR%3D%3Ds${t}`,n=await(await ct(r)).json(),{ISIN:s,LONG_NAME:a}=n.rows[0].values;return Object.assign(e,{name:a,isin:s,code:t}),e}catch(t){alert("Failed to fetch initial data: "+t);return}},fetchCurrentPrice:async e=>{try{if(!e.code){console.log("Error: instrument code is missing in:",e);return}let t=`https://www.oslobors.no/ob/servlets/components?source=feed.omff.FUNDS&view=REALTIME&columns=ITEM%2C+PRICECHANGEPCT%2C+TRADE_TIME%2C+PRICE%2C+DATE%2C+LAST%2C+CHANGE&filter=ITEM_SECTOR%3D%3Ds${e.code}`,r=await(await ct(t)).json();return e.latestPrice=+r.rows[0].values.PRICE.toFixed(2),!0}catch(t){return alert("Failed to fetch current price: "+t),!1}}}];var $e="instruments",P={},Ir=e=>({type:"store:instrument-created",payload:e}),Mr=e=>({type:"store:instrument-updated",payload:e}),q=e=>({type:"store:instruments-updated",payload:e}),Er=e=>({type:"store:instrument-deleted",payload:e}),pe=()=>Object.values(P),Te=()=>P,lt=async e=>{if(P[e.code])return!1;let t={...e};return t.latestUpdate=new Date().toISOString(),P[t.code]=t,Fe().then(()=>w(Ir,{instrument:t}))},kr=async e=>{let{code:t=""}=e;if(!P[t])return!1;let r=P[t];return Object.assign(r,e),r.latestUpdate=new Date().toISOString(),Fe().then(()=>w(Mr,{instrument:r}))},ut=async e=>P[e]?(delete P[e],Fe().then(()=>w(Er,{code:e}))):!1,Cr=async()=>{P=JSON.parse(localStorage.getItem($e)||"{}"),console.log({instruments:P})},Fe=async()=>{localStorage.setItem($e,JSON.stringify(P))},dt=async e=>{localStorage.setItem($e,JSON.stringify(e))},pt=async()=>{let e=!1;for(let t of pe())if(!t.latestUpdate||new Date(t.latestUpdate).getTime()<Date.now()-120*1e3){let r=Se.find(n=>n.name===t.sourceName);if(!r){console.log("Error: source not found:",t);continue}await r.fetchCurrentPrice(t)&&(await kr(t),e=!0)}e&&w(q,{}),setTimeout(pt,1e3*10)};Cr().then(pt);var He="wallets",F={},ze=e=>({type:"store:wallet-created",payload:e}),Nr=e=>({type:"store:wallet-updated",payload:e}),Lr=e=>({type:"store:wallets-updated",payload:e});var mt=()=>Object.values(F),me=()=>F,ft=async e=>{if(F[e.name])return!1;let t={...e};return F[t.name]=t,ht().then(()=>w(ze,{wallet:t}))},Be=async e=>{let{name:t=""}=e;return F[t]?(F[t]=e,ht().then(()=>w(Nr,{wallet:e}))):!1};var Or=async()=>{F=JSON.parse(localStorage.getItem(He)||"{}"),console.log({wallets:F})},ht=async()=>{localStorage.setItem(He,JSON.stringify(F))},gt=async e=>{localStorage.setItem(He,JSON.stringify(e))};Or().then(()=>w(Lr,{}));var je=e=>t=>({type:e,payload:t}),Ge=e=>t=>{let{xname:r="",xid:n=""}=t.target.dataset;r&&w(je(`${r}:${e}`),{xname:r,xid:n,ev:t})},xt=()=>{document.addEventListener("click",Ge("click")),document.addEventListener("keyup",Ge("keyup")),document.addEventListener("keydown",Ge("keydown"))},M=e=>je(e),qe=e=>je(e),b=({el:e=document,sel:t="",xname:r,xid:n})=>{let s=`[data-xname="${r}"]`,a=n?`[data-xid="${n}"]`:"";return e.querySelector(`${t}${s}${a}`)},K=(e,t)=>{if(!e)return;let r=e;if(r.querySelector){r.value=""+t;return}let n=b(e);n&&(n.value=""+t)},Y=(e,t)=>{if(!e)return t;let r=e;if(r.querySelector)return r.value;let n=b(e);return n?n.value:t};function Rr(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Ar(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var wt=function(){function e(r){var n=this;this._insertTag=function(s){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,a),n.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Ar(this));var s=this.tags[this.tags.length-1];if(!1)var a;if(this.isSpeedy){var i=Rr(s);try{i.insertRule(n,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}();var S="-ms-",Z="-moz-",p="-webkit-",Ie="comm",Q="rule",X="decl";var yt="@import";var Me="@keyframes";var vt=Math.abs,J=String.fromCharCode,bt=Object.assign;function St(e,t){return(((t<<2^T(e,0))<<2^T(e,1))<<2^T(e,2))<<2^T(e,3)}function Ee(e){return e.trim()}function Tt(e,t){return(e=t.exec(e))?e[0]:e}function m(e,t,r){return e.replace(t,r)}function fe(e,t){return e.indexOf(t)}function T(e,t){return e.charCodeAt(t)|0}function G(e,t,r){return e.slice(t,r)}function E(e){return e.length}function ee(e){return e.length}function te(e,t){return t.push(e),e}function It(e,t){return e.map(t).join("")}var ke=1,re=1,Mt=0,k=0,y=0,oe="";function he(e,t,r,n,s,a,i){return{value:e,root:t,parent:r,type:n,props:s,children:a,line:ke,column:re,length:i,return:""}}function ae(e,t){return bt(he("",null,null,"",null,null,0),e,{length:-e.length},t)}function Et(){return y}function kt(){return y=k>0?T(oe,--k):0,re--,y===10&&(re=1,ke--),y}function C(){return y=k<Mt?T(oe,k++):0,re++,y===10&&(re=1,ke++),y}function A(){return T(oe,k)}function ge(){return k}function se(e,t){return G(oe,e,t)}function ne(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ce(e){return ke=re=1,Mt=E(oe=e),k=0,[]}function Ne(e){return oe="",e}function ie(e){return Ee(se(k-1,Ke(e===91?e+2:e===40?e+1:e)))}function Ct(e){for(;(y=A())&&y<33;)C();return ne(e)>2||ne(y)>3?"":" "}function Nt(e,t){for(;--t&&C()&&!(y<48||y>102||y>57&&y<65||y>70&&y<97););return se(e,ge()+(t<6&&A()==32&&C()==32))}function Ke(e){for(;C();)switch(y){case e:return k;case 34:case 39:e!==34&&e!==39&&Ke(y);break;case 40:e===41&&Ke(e);break;case 92:C();break}return k}function Lt(e,t){for(;C()&&e+y!==47+10;)if(e+y===42+42&&A()===47)break;return"/*"+se(t,k-1)+"*"+J(e===47?e:C())}function Ot(e){for(;!ne(A());)C();return se(e,k)}function Pt(e){return Ne(Le("",null,null,null,[""],e=Ce(e),0,[0],e))}function Le(e,t,r,n,s,a,i,c,l){for(var d=0,u=0,f=i,N=0,$=0,O=0,g=1,L=1,v=1,I=0,V="",de=s,z=a,D=n,x=V;L;)switch(O=I,I=C()){case 40:if(O!=108&&x.charCodeAt(f-1)==58){fe(x+=m(ie(I),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:x+=ie(I);break;case 9:case 10:case 13:case 32:x+=Ct(O);break;case 92:x+=Nt(ge()-1,7);continue;case 47:switch(A()){case 42:case 47:te(Pr(Lt(C(),ge()),t,r),l);break;default:x+="/"}break;case 123*g:c[d++]=E(x)*v;case 125*g:case 59:case 0:switch(I){case 0:case 125:L=0;case 59+u:$>0&&E(x)-f&&te($>32?At(x+";",n,r,f-1):At(m(x," ","")+";",n,r,f-2),l);break;case 59:x+=";";default:if(te(D=Rt(x,t,r,d,u,s,c,V,de=[],z=[],f),a),I===123)if(u===0)Le(x,t,D,D,de,a,f,c,z);else switch(N){case 100:case 109:case 115:Le(e,D,D,n&&te(Rt(e,D,D,0,0,s,c,V,s,de=[],f),z),s,z,f,c,n?de:z);break;default:Le(x,D,D,D,[""],z,0,c,z)}}d=u=$=0,g=v=1,V=x="",f=i;break;case 58:f=1+E(x),$=O;default:if(g<1){if(I==123)--g;else if(I==125&&g++==0&&kt()==125)continue}switch(x+=J(I),I*g){case 38:v=u>0?1:(x+="\f",-1);break;case 44:c[d++]=(E(x)-1)*v,v=1;break;case 64:A()===45&&(x+=ie(C())),N=A(),u=f=E(V=x+=Ot(ge())),I++;break;case 45:O===45&&E(x)==2&&(g=0)}}return a}function Rt(e,t,r,n,s,a,i,c,l,d,u){for(var f=s-1,N=s===0?a:[""],$=ee(N),O=0,g=0,L=0;O<n;++O)for(var v=0,I=G(e,f+1,f=vt(g=i[O])),V=e;v<$;++v)(V=Ee(g>0?N[v]+" "+I:m(I,/&\f/g,N[v])))&&(l[L++]=V);return he(e,t,r,s===0?Q:c,l,d,u)}function Pr(e,t,r){return he(e,t,r,Ie,J(Et()),G(e,2,-2),0)}function At(e,t,r,n){return he(e,t,r,X,G(e,0,n),G(e,n+1,-1),n)}function Ye(e,t){switch(St(e,t)){case 5103:return p+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return p+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return p+e+Z+e+S+e+e;case 6828:case 4268:return p+e+S+e+e;case 6165:return p+e+S+"flex-"+e+e;case 5187:return p+e+m(e,/(\w+).+(:[^]+)/,p+"box-$1$2"+S+"flex-$1$2")+e;case 5443:return p+e+S+"flex-item-"+m(e,/flex-|-self/,"")+e;case 4675:return p+e+S+"flex-line-pack"+m(e,/align-content|flex-|-self/,"")+e;case 5548:return p+e+S+m(e,"shrink","negative")+e;case 5292:return p+e+S+m(e,"basis","preferred-size")+e;case 6060:return p+"box-"+m(e,"-grow","")+p+e+S+m(e,"grow","positive")+e;case 4554:return p+m(e,/([^-])(transform)/g,"$1"+p+"$2")+e;case 6187:return m(m(m(e,/(zoom-|grab)/,p+"$1"),/(image-set)/,p+"$1"),e,"")+e;case 5495:case 3959:return m(e,/(image-set\([^]*)/,p+"$1$`$1");case 4968:return m(m(e,/(.+:)(flex-)?(.*)/,p+"box-pack:$3"+S+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+p+e+e;case 4095:case 3583:case 4068:case 2532:return m(e,/(.+)-inline(.+)/,p+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(E(e)-1-t>6)switch(T(e,t+1)){case 109:if(T(e,t+4)!==45)break;case 102:return m(e,/(.+:)(.+)-([^]+)/,"$1"+p+"$2-$3$1"+Z+(T(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~fe(e,"stretch")?Ye(m(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(T(e,t+1)!==115)break;case 6444:switch(T(e,E(e)-3-(~fe(e,"!important")&&10))){case 107:return m(e,":",":"+p)+e;case 101:return m(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+p+(T(e,14)===45?"inline-":"")+"box$3$1"+p+"$2$3$1"+S+"$2box$3")+e}break;case 5936:switch(T(e,t+11)){case 114:return p+e+S+m(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return p+e+S+m(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return p+e+S+m(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return p+e+S+e+e}return e}function j(e,t){for(var r="",n=ee(e),s=0;s<n;s++)r+=t(e[s],s,e,t)||"";return r}function Ut(e,t,r,n){switch(e.type){case yt:case X:return e.return=e.return||e.value;case Ie:return"";case Me:return e.return=e.value+"{"+j(e.children,n)+"}";case Q:e.value=e.props.join(",")}return E(r=j(e.children,n))?e.return=e.value+"{"+r+"}":""}function Vt(e){var t=ee(e);return function(r,n,s,a){for(var i="",c=0;c<t;c++)i+=e[c](r,n,s,a)||"";return i}}function Dt(e){return function(t){t.root||(t=t.return)&&e(t)}}function Wt(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case X:e.return=Ye(e.value,e.length);break;case Me:return j([ae(e,{value:m(e.value,"@","@"+p)})],n);case Q:if(e.length)return It(e.props,function(s){switch(Tt(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return j([ae(e,{props:[m(s,/:(read-\w+)/,":"+Z+"$1")]})],n);case"::placeholder":return j([ae(e,{props:[m(s,/:(plac\w+)/,":"+p+"input-$1")]}),ae(e,{props:[m(s,/:(plac\w+)/,":"+Z+"$1")]}),ae(e,{props:[m(s,/:(plac\w+)/,S+"input-$1")]})],n)}return""})}}function Ur(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var _t=Ur;var Vr=function(t,r,n){for(var s=0,a=0;s=a,a=A(),s===38&&a===12&&(r[n]=1),!ne(a);)C();return se(t,k)},Dr=function(t,r){var n=-1,s=44;do switch(ne(s)){case 0:s===38&&A()===12&&(r[n]=1),t[n]+=Vr(k-1,r,n);break;case 2:t[n]+=ie(s);break;case 4:if(s===44){t[++n]=A()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=J(s)}while(s=C());return t},Wr=function(t,r){return Ne(Dr(Ce(t),r))},$t=new WeakMap,_r=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,s=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!$t.get(n))&&!s){$t.set(t,!0);for(var a=[],i=Wr(r,a),c=n.props,l=0,d=0;l<i.length;l++)for(var u=0;u<c.length;u++,d++)t.props[d]=a[l]?i[l].replace(/&\f/g,c[u]):c[u]+" "+i[l]}}},$r=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};var Fr=[Wt],Hr=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var L=g.getAttribute("data-emotion");L.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=t.stylisPlugins||Fr,a={},i,c=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var L=g.getAttribute("data-emotion").split(" "),v=1;v<L.length;v++)a[L[v]]=!0;c.push(g)});var l,d=[_r,$r];{var u,f=[Ut,Dt(function(g){u.insert(g)})],N=Vt(d.concat(s,f)),$=function(L){return j(Pt(L),N)};l=function(L,v,I,V){u=I,$(L?L+"{"+v.styles+"}":v.styles),V&&(O.inserted[v.name]=!0)}}var O={key:r,sheet:new wt({key:r,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return O.sheet.hydrate(c),O},Ft=Hr;function zr(e){for(var t=0,r,n=0,s=e.length;s>=4;++n,s-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Ht=zr;var Br={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zt=Br;var Gr=/[A-Z]|^ms/g,jr=/_EMO_([^_]+?)_([^]*?)_EMO_/g,qt=function(t){return t.charCodeAt(1)===45},Bt=function(t){return t!=null&&typeof t!="boolean"},Je=_t(function(e){return qt(e)?e:e.replace(Gr,"-$&").toLowerCase()}),Gt=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(jr,function(n,s,a){return W={name:s,styles:a,next:W},s})}return zt[t]!==1&&!qt(t)&&typeof r=="number"&&r!==0?r+"px":r};function xe(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return W={name:r.name,styles:r.styles,next:W},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)W={name:n.name,styles:n.styles,next:W},n=n.next;var s=r.styles+";";return s}return qr(e,t,r)}case"function":{if(e!==void 0){var a=W,i=r(e);return W=a,xe(e,t,i)}break}case"string":if(!1)var c,l;break}if(t==null)return r;var d=t[r];return d!==void 0?d:r}function qr(e,t,r){var n="";if(Array.isArray(r))for(var s=0;s<r.length;s++)n+=xe(e,t,r[s])+";";else for(var a in r){var i=r[a];if(typeof i!="object")t!=null&&t[i]!==void 0?n+=a+"{"+t[i]+"}":Bt(i)&&(n+=Je(a)+":"+Gt(a,i)+";");else if(Array.isArray(i)&&typeof i[0]=="string"&&(t==null||t[i[0]]===void 0))for(var c=0;c<i.length;c++)Bt(i[c])&&(n+=Je(a)+":"+Gt(a,i[c])+";");else{var l=xe(e,t,i);switch(a){case"animation":case"animationName":{n+=Je(a)+":"+l+";";break}default:n+=a+"{"+l+"}"}}}return n}var jt=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var W,Oe=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,a="";W=void 0;var i=t[0];i==null||i.raw===void 0?(s=!1,a+=xe(n,r,i)):a+=i[0];for(var c=1;c<t.length;c++)a+=xe(n,r,t[c]),s&&(a+=i[c]);var l;jt.lastIndex=0;for(var d="",u;(u=jt.exec(a))!==null;)d+="-"+u[1];var f=Ht(a)+d;return{name:f,styles:a,next:W}};var Kr=!0;function Ze(e,t,r){var n="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):n+=s+" "}),n}var Kt=function(t,r,n){var s=t.key+"-"+r.name;if((n===!1||Kr===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles),t.inserted[r.name]===void 0){var a=r;do{var i=t.insert(r===a?"."+s:"",a,t.sheet,!0);a=a.next}while(a!==void 0)}};function Yt(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function Jt(e,t,r){var n=[],s=Ze(e,n,r);return n.length<2?r:s+t(n)}var Yr=function(t){var r=Ft(t);r.sheet.speedy=function(c){this.isSpeedy=c},r.compat=!0;var n=function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var f=Oe(d,r.registered,void 0);return Kt(r,f,!1),r.key+"-"+f.name},s=function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var f=Oe(d,r.registered),N="animation-"+f.name;return Yt(r,{name:f.name,styles:"@keyframes "+N+"{"+f.styles+"}"}),N},a=function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var f=Oe(d,r.registered);Yt(r,f)},i=function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];return Jt(r.registered,n,Jr(d))};return{css:n,cx:i,injectGlobal:a,keyframes:s,hydrate:function(l){l.forEach(function(d){r.inserted[d]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:Ze.bind(null,r.registered),merge:Jt.bind(null,r.registered,n)}},Jr=function e(t){for(var r="",n=0;n<t.length;n++){var s=t[n];if(s!=null){var a=void 0;switch(typeof s){case"boolean":break;case"object":{if(Array.isArray(s))a=e(s);else{a="";for(var i in s)s[i]&&i&&(a&&(a+=" "),a+=i)}break}default:a=s}a&&(r&&(r+=" "),r+=a)}}return r},Zt=Yr;var _=Zt({key:"css"}),To=_.flush,Io=_.hydrate,Mo=_.cx,Eo=_.merge,ko=_.getRegisteredStyles,Qt=_.injectGlobal,Co=_.keyframes,U=_.css,No=_.sheet,Lo=_.cache;var Zr=U`
  cursor: pointer;
`,Qr=U`
  border: 0;
  color: blue;
  background: transparent;
  cursor: pointer;
  font-size: 0.85rem;
  &:hover {
    text-decoration: underline;
  }
`,R=(e,...t)=>{let r={...e};return r.disabled||delete r.disabled,o("button",{class:r.variant==="text"?Qr:Zr,...r},t)},Qe=(e,...t)=>{let r={...e},{view:n}=e;return n&&(r.href=""+et({searchSet:{view:n}})),o("a",{"data-to":r.href,onClick:s=>{s.preventDefault();let{href:a}=s.currentTarget;a&&tt(a)},...r},t)};var Xt=()=>o("div",null,o("p",null,"This app does NOT send any data to the server. Anything you save is stored in your browser's local storage only."),o("p",null,"Start with defining some instruments, then add them to a wallet.")),er=async()=>{console.log("ViewHome mounted!")};var tr=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e(...n),t)}};var Xr=new Intl.DateTimeFormat("en-GB",{dateStyle:"medium",timeStyle:"medium"}),en=new Intl.DateTimeFormat("en-GB",{dateStyle:"short"}),tn=new Intl.NumberFormat("no-NB",{minimumFractionDigits:2,maximumFractionDigits:2}),rr=e=>Xr.format(typeof e=="string"?new Date(e):e),Xe=e=>{let t=en.formatToParts(typeof e=="string"?new Date(e):e);return`${t[4].value}-${t[2].value}-${t[0].value}`},H=e=>tn.format(e);var rn=U`
  -label: view-instruments;

  [data-xname='new-instrument'] {
    width: 500px;
    font-size: 0.8rem;
  }
  [data-xname='instrument-list'] {
    .right {
      text-align: right;
    }
    .small {
      font-size: 0.9rem;
    }
    td {
      padding: 0.4rem 0.8rem;
    }
    td:first-child {
      padding-left: 0;
    }
  }
`,ce=null,nr=null,nn=e=>o("tr",{xname:"instrument",xid:e.code},o("td",null,o("a",{href:e.sourceUrl,target:"_blank"},o("strong",null,e.name))),o("td",{class:"right"},o("strong",null,e.latestPrice.toFixed(2))),o("td",null,e.code),o("td",{class:"small"},rr(e.latestUpdate)),o("td",null,o(R,{xname:"instrument-delete",xid:e.code,variant:"text"},"Delete"))),Re=()=>{nr?.replaceChildren(...pe().map(nn))},or=async()=>{ce=b({xname:"new-instrument"}),nr=b({xname:"instrument-list"}),Re(),console.log("ViewInstruments mounted!")};h(q,Re);h(M("add-new-instrument:click"),async()=>{let e=ce?.value||"",t=Se.find(n=>n.matchSource(e));if(!t){alert("Unrecognised URL");return}let r={sourceUrl:e,sourceName:t.name};if(await t.fetchInitialData(r),!r.name){alert("Failed to fetch instrument data");return}if(!await t.fetchCurrentPrice(r)){alert("Failed to fetch instrument data");return}await lt(r),ce&&(ce.value=""),Re()});h(M("clear-new-instrument:click"),async()=>{ce&&(ce.value="")});h(M("instrument-delete:click"),async({xid:e})=>{!e||!confirm("Removing instrument:  "+e+"  will remove it from all wallets.")||(await ut(e),Re())});var ar=()=>o("div",{class:rn},o("p",null,"Paste the URL of the instrument you want to track. Supported websites:",o("ul",null,o("li",null,o("a",{href:"https://www.euronext.com/nb/markets/oslo"},"oslobors / euronext")," ",o("small",null,"( for example:"," ",o("a",{href:"https://www.oslobors.no/ob_eng/markedsaktivitet/#/details/DK-GLOIN.OSE/overview",target:"_blank"},"https://www.oslobors.no/ob_eng/markedsaktivitet/#/details/DK-GLOIN.OSE/overview")," ",")")))),o("div",null,o("input",{xname:"new-instrument"}),"  ",o(R,{xname:"add-new-instrument"},"Add instrument"),"  ",o(R,{xname:"clear-new-instrument",variant:"text"},"Clear")),o("h2",null,"Tracked instruments"),o("table",{xname:"instrument-list"}));var on=U`
  -label: view-wallets;

  [data-xname='new-wallet-name'] {
    width: 200px;
    font-size: 0.8rem;
  }
  [data-xname='new-wallet-comment'] {
    width: 500px;
    font-size: 0.8rem;
  }
  [data-xname='wallet-list'] {
  }

  [data-xname='wallet'] {
    margin-bottom: 2rem;
    .title {
      background-color: #ccc;
      * {
        padding: 0.5rem 1rem;
        display: inline-block;
      }
    }
    .name {
      font-size: 1.2rem;
      margin-right: 1rem;
    }
    .comment {
    }
  }
  [data-xname='instruments'] {
    border-collapse: collapse;
    border: 0;
    /* width: 100%; */
    font-size: 0.85rem;
    tr {
      border: 1px solid gray;
    }
    td,
    th {
      padding: 0.4rem 0;
    }
    td:first-child,
    th:first-child {
      padding-left: 0.4rem;
    }
    td:last-child,
    th:last-child {
      padding-right: 0.4rem;
    }
    .instrument-name {
      text-align: left;
    }
    .price {
      text-align: right;
      width: 100px;
      input {
        width: 80px;
        text-align: right;
      }
    }
    .percent {
      text-align: right;
      width: 60px;
    }
    .date {
      width: 130px;
      text-align: right;
    }
    .actions {
      text-align: right;
      width: 100px;
    }
    .total {
      font-size: 0.75rem;
      font-weight: bold;
    }
  }
`,Ae=null,Pe=null,sr=null,ir=()=>{Ae&&(Ae.value=""),Pe&&(Pe.value="")};h(M("add-new-wallet:click"),async()=>{let e=Ae?.value||"",t=Pe?.value||"";if(!e)return;if(!await ft({name:e,comment:t,instruments:[]})){alert("Failed to create a wallet");return}ir()});h(M("clear-new-wallet:click"),()=>{ir()});var cr=e=>{!e||(K({el:e,xname:"wallet-new-total-price"},""),K({el:e,xname:"wallet-new-unit-price"},""),K({el:e,xname:"wallet-new-date"},Xe(new Date)),K({el:e,xname:"wallet-new-instrument"},""))};h(M("wallet-new-clear-instrument:click"),({xid:e=""})=>{cr(b({xname:"wallet",xid:e}))});h(M("wallet-delete-instrument:click"),({xid:e=""})=>{let[t,r]=e.split(":"),n=me()[t],s=n.instruments.find(({id:a})=>""+a===r);!n||!confirm("Remove instrument "+s?.code+" from wallet "+n.name+"?")||(n.instruments=n.instruments.filter(({id:a})=>""+a!==r),Be(n),we())});h(M("wallet-new-add-instrument:click"),({xid:e=""})=>{let t=me()[e];if(!t){alert("Wallet "+e+" not found");return}let r=b({xname:"wallet",xid:e});if(!r){alert("$wallet "+e+" not found");return}t.instruments.push({id:Date.now(),code:Y({el:r,xname:"wallet-new-instrument"},""),date:Y({el:r,xname:"wallet-new-date"},""),totalPrice:+Y({el:r,xname:"wallet-new-total-price"},""),unitPrice:+Y({el:r,xname:"wallet-new-unit-price"},"")}),Be(t),cr(r),we()});var an=e=>{let t=Te(),r=e.instruments.map(a=>{let i=t[a.code]?.latestPrice||0,c=a.totalPrice/a.unitPrice,l=i*c;return{id:a.id,instrumentName:t[a.code]?.name??"???",instrumentUrl:t[a.code]?.sourceUrl,change:l/a.totalPrice*100-100,currentTotal:l,currentUnit:i,unitCount:c,paidTotal:a.totalPrice,paidUnit:a.unitPrice,paidDate:a.date}}),n=r.reduce((a,i)=>a+i.currentTotal,0),s=r.reduce((a,i)=>a+i.paidTotal,0);return o("div",{xname:"wallet",xid:e.name},o("div",{class:"title"},o("span",{class:"name"},e.name),o("span",{class:"comment"},e.comment)),o("table",{xname:"instruments",xid:e.name},o("tr",null,o("th",{class:"instrument-name"},"Instrument"),o("th",{class:"price"},"Change"),o("th",{class:"percent"},"%"),o("th",{class:"price"},"Total value"),o("th",{class:"price"},"Total price"),o("th",{class:"price"},"Unit value"),o("th",{class:"price"},"Unit count"),o("th",{class:"price"},"Unit price"),o("th",{class:"date"},"Date"),o("th",{class:"actions"})),r.map(a=>o("tr",null,o("td",{class:"instrument-name"},o("a",{href:a.instrumentUrl,target:"_blank"},a.instrumentName)),o("td",{class:"price"},H(a.currentTotal-a.paidTotal)),o("td",{class:"percent"},a.change.toFixed(2)),o("td",{class:"price"},H(a.currentTotal)),o("td",{class:"price"},H(a.paidTotal)),o("td",{class:"price"},H(a.currentUnit)),o("td",{class:"price"},a.unitCount.toFixed(2)),o("td",{class:"price"},H(a.paidUnit)),o("td",{class:"date"},a.paidDate),o("td",{class:"actions"},o(R,{xname:"wallet-delete-instrument",xid:`${e.name}:${a.id}`,variant:"text"},"Delete")))),o("tr",{class:"total"},o("td",{class:"instrument-name"},"Total"),o("td",{class:"price"},H(n-s)),o("td",{class:"percent"},(n/s*100-100).toFixed(2)),o("td",{class:"price"},H(n)),o("td",{class:"price"},H(s)),o("td",{class:"price"}),o("td",{class:"price"}),o("td",{class:"price"}),o("td",{class:"date"}),o("td",{class:"actions"})),o("tr",null,o("td",null,o("select",{xname:"wallet-new-instrument",xid:e.name},o("option",{value:""}),pe().map(a=>o("option",{value:a.code},a.name)))),o("td",null),o("td",null),o("td",null),o("td",{class:"price"},o("input",{type:"number",xname:"wallet-new-total-price",xid:e.name})),o("td",null),o("td",null),o("td",{class:"price"},o("input",{type:"number",xname:"wallet-new-unit-price",xid:e.name})),o("td",{class:"date"},o("input",{type:"date",xname:"wallet-new-date",xid:e.name,pattern:"yyyy-mm-dd",value:Xe(new Date)})),o("td",{class:"actions"},o(R,{xname:"wallet-new-add-instrument",xid:e.name},"Add"),o(R,{xname:"wallet-new-clear-instrument",xid:e.name,variant:"text"},"Clear")))))},we=()=>{sr?.replaceChildren(...mt().map(an))};h(ze,we);h(q,we);var lr=()=>o("div",{class:on},o("div",null,o("input",{xname:"new-wallet-name"}),"  ",o("input",{xname:"new-wallet-comment"}),"  ",o(R,{xname:"add-new-wallet"},"Create wallet"),"  ",o(R,{xname:"clear-new-wallet",variant:"text"},"Clear")),o("h2",null,"Your wallets"),o("div",{xname:"wallet-list"})),ur=async()=>{Ae=b({xname:"new-wallet-name"}),Pe=b({xname:"new-wallet-comment"}),sr=b({xname:"wallet-list"}),we(),console.log("ViewWallets mounted!")};var ue=null,le=null,dr=e=>o("li",{xname:"todo",xid:e.id},o("button",{xname:"todo-delete",xid:e.id}," X "),"\xA0",o("input",{xname:"todo-text",xid:e.id,value:e.text})),pr=()=>{if(!le)return;le.focus();let e=le.value.trim();!e||(le.value="",ot(e))},sn=tr((e,t)=>{at({done:!1,text:t,id:e})},500);h(M("todo-delete:click"),({xid:e=""})=>{st(e)});h(M("create-todo:click"),()=>{pr()});h(qe("new-item-text:keyup"),({ev:e})=>{e.key==="Enter"&&pr()});h(qe("todo-text:keyup"),({ev:e,xid:t=""})=>{let{value:r}=e.target;typeof r=="string"&&sn(t,r)});h(We,({todoId:e})=>{let t=ue&&b({el:ue,xname:"todo",xid:e});t&&ue?.removeChild(t)});h(De,({todo:e})=>{ue?.appendChild(dr(e))});var mr=()=>o("div",null,o("div",null,o("input",{xname:"new-item-text"}),"\xA0",o("button",{xname:"create-todo"},"Add")),o("ol",{xname:"items"})),fr=async()=>{ue=b({xname:"items"}),le=b({xname:"new-item-text"}),le?.focus(),await it(),ue?.replaceChildren(...nt().map(dr)),console.log("ViewTodo mounted!")};var cn=U`
  -label: view-migration;

  textarea {
    margin-top: 10px;
    width: 500px;
    height: 400px;
  }
`,Ue=null;h(M("migration-export:click"),()=>{let e=me(),t=Te();K(Ue,JSON.stringify({instruments:t,wallets:e},null,2)),Ue?.select()});h(M("migration-import:click"),async()=>{if(!!confirm("WARNING! This will replace *ALL* INSTRUMENT AND WALLET  data in local storage!"))try{let{wallets:e,instruments:t}=JSON.parse(Y(Ue,""));console.log({wallets:e,instruments:t}),await dt(t),await gt(e),w(q,{})}catch(e){alert("Failed to load data: "+e)}});var hr=()=>o("div",{class:cn},o("div",null,o(R,{xname:"migration-export"},"Export from LS")," ",o(R,{xname:"migration-import"},"Import to LS")),o("textarea",{xname:"buffer"})),gr=async()=>{Ue=b({xname:"buffer"}),console.log("ViewMigration mounted!")};var Ve={home:{component:Xt,onMount:er,label:"Home"},instruments:{component:ar,onMount:or,label:"Instruments"},wallets:{component:lr,onMount:ur,label:"Wallets"},todo:{component:mr,onMount:fr,label:"Todo"},migration:{component:hr,onMount:gr,label:"Data migration"}},xr=()=>{let{component:e,onMount:t,label:r}=Ve[be()]||Ve.home;return{component:e(),onMount:t,label:r}};var ln=U`
  -label: top-bar;

  a {
    color: red;
    text-decoration: none;
  }
`,wr=()=>{let[,...e]=Object.entries(Ve);return o("div",{class:ln},o("span",null,o(Qe,{href:"/"},o("h1",null,"Investment tracker"))),e.map(([t,r],n)=>o("span",null,n>0?" | ":"",o(Qe,{view:t},r.label))))};Qt`
  body {
    //background: lime;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  a {
    color: blue;
    text-decoration: none;
  }
  h1 { /* app title */
    display: inline-block;
    margin: 0;
    margin-right: 20px;
    font-size: 1.5rem;
    color: black;

  }
  h2 { /* view title */
    font-size: 1.2rem;
  }

  input[type="date"] {
    padding: 0;
    font-size: 13px;
    width: 115px;
  }
  input[type="date"]::-webkit-inner-spin-button,
  input[type="date"]::-webkit-calendar-picker-indicator {
    margin: 0;
    padding: 1px;
  }
`;var yr=null,vr=async()=>{let{component:e,onMount:t}=xr();return yr?.replaceChildren(e),t()};h(ve,e=>{console.log("went to",be(),e.newUrl.href),vr()});var br=()=>o("div",null,o(wr,null),o("hr",null),o("div",{xname:"current-view"})),Sr=async()=>{yr=b({xname:"current-view"}),await vr(),console.log("App mounted!")};xt();document.body.appendChild(o(br,null));Sr();})();
